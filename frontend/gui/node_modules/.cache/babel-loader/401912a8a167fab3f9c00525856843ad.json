{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst stream_1 = require(\"stream\");\n\nconst stream_2 = require(\"../readers/stream\");\n\nconst provider_1 = require(\"./provider\");\n\nclass ProviderStream extends provider_1.default {\n  constructor() {\n    super(...arguments);\n    this._reader = new stream_2.default(this._settings);\n  }\n\n  read(task) {\n    const root = this._getRootDirectory(task);\n\n    const options = this._getReaderOptions(task);\n\n    const source = this.api(root, task, options);\n    const destination = new stream_1.Readable({\n      objectMode: true,\n      read: () => {}\n    });\n    source.once('error', error => destination.emit('error', error)).on('data', entry => destination.emit('data', options.transform(entry))).once('end', () => destination.emit('end'));\n    destination.once('close', () => source.destroy());\n    return destination;\n  }\n\n  api(root, task, options) {\n    if (task.dynamic) {\n      return this._reader.dynamic(root, options);\n    }\n\n    return this._reader.static(task.patterns, options);\n  }\n\n}\n\nexports.default = ProviderStream;","map":{"version":3,"sources":["C:/Users/Admin/programs/django+react/tutorials/graphql_django/frontend/gui/node_modules/@graphql-tools/load/node_modules/fast-glob/out/providers/stream.js"],"names":["Object","defineProperty","exports","value","stream_1","require","stream_2","provider_1","ProviderStream","default","constructor","arguments","_reader","_settings","read","task","root","_getRootDirectory","options","_getReaderOptions","source","api","destination","Readable","objectMode","once","error","emit","on","entry","transform","destroy","dynamic","static","patterns"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,QAAD,CAAxB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,mBAAD,CAAxB;;AACA,MAAME,UAAU,GAAGF,OAAO,CAAC,YAAD,CAA1B;;AACA,MAAMG,cAAN,SAA6BD,UAAU,CAACE,OAAxC,CAAgD;AAC5CC,EAAAA,WAAW,GAAG;AACV,UAAM,GAAGC,SAAT;AACA,SAAKC,OAAL,GAAe,IAAIN,QAAQ,CAACG,OAAb,CAAqB,KAAKI,SAA1B,CAAf;AACH;;AACDC,EAAAA,IAAI,CAACC,IAAD,EAAO;AACP,UAAMC,IAAI,GAAG,KAAKC,iBAAL,CAAuBF,IAAvB,CAAb;;AACA,UAAMG,OAAO,GAAG,KAAKC,iBAAL,CAAuBJ,IAAvB,CAAhB;;AACA,UAAMK,MAAM,GAAG,KAAKC,GAAL,CAASL,IAAT,EAAeD,IAAf,EAAqBG,OAArB,CAAf;AACA,UAAMI,WAAW,GAAG,IAAIlB,QAAQ,CAACmB,QAAb,CAAsB;AAAEC,MAAAA,UAAU,EAAE,IAAd;AAAoBV,MAAAA,IAAI,EAAE,MAAM,CAAG;AAAnC,KAAtB,CAApB;AACAM,IAAAA,MAAM,CACDK,IADL,CACU,OADV,EACoBC,KAAD,IAAWJ,WAAW,CAACK,IAAZ,CAAiB,OAAjB,EAA0BD,KAA1B,CAD9B,EAEKE,EAFL,CAEQ,MAFR,EAEiBC,KAAD,IAAWP,WAAW,CAACK,IAAZ,CAAiB,MAAjB,EAAyBT,OAAO,CAACY,SAAR,CAAkBD,KAAlB,CAAzB,CAF3B,EAGKJ,IAHL,CAGU,KAHV,EAGiB,MAAMH,WAAW,CAACK,IAAZ,CAAiB,KAAjB,CAHvB;AAIAL,IAAAA,WAAW,CACNG,IADL,CACU,OADV,EACmB,MAAML,MAAM,CAACW,OAAP,EADzB;AAEA,WAAOT,WAAP;AACH;;AACDD,EAAAA,GAAG,CAACL,IAAD,EAAOD,IAAP,EAAaG,OAAb,EAAsB;AACrB,QAAIH,IAAI,CAACiB,OAAT,EAAkB;AACd,aAAO,KAAKpB,OAAL,CAAaoB,OAAb,CAAqBhB,IAArB,EAA2BE,OAA3B,CAAP;AACH;;AACD,WAAO,KAAKN,OAAL,CAAaqB,MAAb,CAAoBlB,IAAI,CAACmB,QAAzB,EAAmChB,OAAnC,CAAP;AACH;;AAvB2C;;AAyBhDhB,OAAO,CAACO,OAAR,GAAkBD,cAAlB","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst stream_1 = require(\"stream\");\r\nconst stream_2 = require(\"../readers/stream\");\r\nconst provider_1 = require(\"./provider\");\r\nclass ProviderStream extends provider_1.default {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._reader = new stream_2.default(this._settings);\r\n    }\r\n    read(task) {\r\n        const root = this._getRootDirectory(task);\r\n        const options = this._getReaderOptions(task);\r\n        const source = this.api(root, task, options);\r\n        const destination = new stream_1.Readable({ objectMode: true, read: () => { } });\r\n        source\r\n            .once('error', (error) => destination.emit('error', error))\r\n            .on('data', (entry) => destination.emit('data', options.transform(entry)))\r\n            .once('end', () => destination.emit('end'));\r\n        destination\r\n            .once('close', () => source.destroy());\r\n        return destination;\r\n    }\r\n    api(root, task, options) {\r\n        if (task.dynamic) {\r\n            return this._reader.dynamic(root, options);\r\n        }\r\n        return this._reader.static(task.patterns, options);\r\n    }\r\n}\r\nexports.default = ProviderStream;\r\n"]},"metadata":{},"sourceType":"script"}